import{m as n,p as I,J as z,c as T,o as s,w as A,b as e,g,f as o,u as c,j as $,a as v,e as B,n as b,t as l,F as P,s as R,i as j,y as G,q as U,N as J}from"./app-BSueqgG5.js";import{_ as O}from"./AppLayout-BP1qcBNA.js";import{c as D}from"./theater-BAsG6dnv.js";import{S as Q}from"./star-BDCtRnzr.js";import{M as W,T as Y}from"./ticket-Cv9qqvHG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./search-BiXtsVnu.js";import"./user-xYq09_Iv.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=D("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=D("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=D("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Z={class:"flex items-center justify-center h-screen"},ee={class:"w-full max-w-4xl p-6 bg-white rounded-lg shadow-xl md:p-8"},te={key:2,class:"grid gap-12 lg:grid-cols-2"},se=["src"],ae={class:"grid grid-cols-3 gap-4"},oe={class:"mb-6"},le={class:"px-3 py-1 text-sm font-semibold text-purple-800 bg-purple-100 rounded-full"},ie={class:"mb-4 text-4xl font-bold text-gray-800"},re={class:"flex items-center mb-6"},ne={class:"flex mr-3 text-yellow-400"},de={class:"text-gray-600"},ue={class:"mb-8 text-lg text-gray-600"},ce={class:"p-6 mb-8 bg-gray-50 rounded-xl"},me={class:"grid grid-cols-2 gap-4"},pe={class:"font-semibold"},ge={class:"font-semibold"},ve={class:"flex items-center justify-between mb-8"},he={class:"text-3xl font-bold text-purple-600"},ye={key:3,class:"mt-8"},fe={class:"mb-6"},xe={key:0,class:"text-center text-gray-500"},be={key:1,class:"text-center text-gray-500"},ke={key:2,class:"space-y-4"},we=["onClick"],_e={class:"flex items-center justify-between"},Se={class:"flex items-center space-x-3"},Me={class:"font-medium text-gray-800"},Ce={class:"flex items-center space-x-3"},Pe={class:"text-gray-700"},Re={class:"flex items-center mt-2 space-x-3 text-gray-600"},De={class:"flex items-center mt-2 space-x-3 text-gray-600"},Te={class:"flex items-center mt-2 space-x-3"},Ae=["value"],Be={key:0,class:"mb-6"},je={class:"flex items-center mb-6 space-x-4"},He=["disabled"],Le={key:0},qe={key:1},Fe={key:1,class:"p-4 mt-6 text-red-700 bg-red-100 rounded-md"},Ne={key:2,class:"p-4 mt-6 text-green-700 bg-green-100 rounded-md"},Oe={__name:"ShowDetails",props:{show:{type:Array,required:!0},mockRepresentations:{type:Array,required:!0},prices:{type:Array,required:!0}},setup(S){const f=S,x=n([]),k=n(""),i=n(null),w=n([]),u=n(""),h=n(1),M=n(!1),m=n(!1),C=n(!1),d=n(null),y=n("details"),_=n(),L=[{id:"show-1",title:"The Phantom of the Opera",category:"Musical",description:"A timeless story of a mysterious masked figure who haunts the Paris Opera House.",fullDescription:"Deep in the catacombs of the Paris Opera House, a masked musical genius, the Phantom, falls in love with the innocent soprano Christine. His obsession leads to a dramatic and tragic tale of love, jealousy, and murder. Experience the magic and mystery live!",rating:4.8,reviews:234,venue:"Majestic Theatre",duration:"2h 30min",language:"English",ageRating:"PG-13",price:85,gradient:"bg-gradient-to-br from-purple-500 to-pink-500"},{id:"show-2",title:"Hamilton",category:"Hip-Hop Musical",description:"The story of America's founding father Alexander Hamilton, an immigrant from the West Indies who became George Washington's right-hand man.",fullDescription:"Hamilton is a groundbreaking musical that tells the story of American Founding Father Alexander Hamilton through a blend of hip-hop, jazz, R&B, and Broadway. It explores his life, political career, and rivalries, offering a fresh perspective on American history and a truly unique theatrical experience.",rating:4.9,reviews:567,venue:"Richard Rodgers Theatre",duration:"2h 45min",language:"English",ageRating:"PG",price:120,gradient:"bg-gradient-to-br from-blue-500 to-cyan-500"},{id:"show-3",title:"Les Misérables",category:"Musical Drama",description:"An epic and uplifting story about the survival of the human spirit.",fullDescription:"Set in 19th-century France, Les Misérables tells the enthralling story of Jean Valjean, a former convict who spends nineteen years in jail for stealing a loaf of bread. Relentlessly pursued by the ruthless Inspector Javert, Valjean seeks redemption while caring for Cosette, the daughter of a dying factory worker. A powerful and emotional journey.",rating:4.7,reviews:189,venue:"Imperial Theatre",duration:"3h 00min",language:"English",ageRating:"PG-13",price:95,gradient:"bg-gradient-to-br from-red-500 to-orange-500"}],q=async()=>{m.value=!0,d.value=null;try{await new Promise(a=>setTimeout(a,500)),x.value=L,x.value.length>0&&(k.value=x.value[0].id,i.value=x.value[0],F())}catch{d.value="Failed to load shows. Please try again."}finally{m.value=!1}},F=async()=>{if(!k.value){w.value=[],u.value="";return}C.value=!0,d.value=null,u.value="";try{await new Promise(a=>setTimeout(a,500)),w.value=f.mockRepresentations}catch{d.value="Failed to load representations. Please try again."}finally{C.value=!1}},N=async()=>{m.value=!0,d.value=null,M.value=!1;const a={representation_id:u.value,price_id:_.value,quantity:h.value};if(!u.value||h.value<1){d.value="Please select a representation and specify a valid quantity.",m.value=!1;return}try{await new Promise(t=>setTimeout(t,1500)),J.post(route("admin.booking.store"),a,{preserveScroll:!0,onSuccess:()=>{M.value=!0}})}catch(t){d.value="Booking failed. Please try again.",console.error("Booking error:",t)}finally{m.value=!1}},V=a=>new Date(a).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),E=a=>new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return I(()=>{q()}),z(k,a=>{a?i.value=x.value.find(t=>t.id===a):i.value=null}),(a,t)=>(s(),T(O,null,{default:A(()=>[e("div",Z,[e("div",ee,[y.value==="details"&&k.value?(s(),T(c($),{key:0,href:a.route("shows"),class:"flex items-center mb-6 text-purple-600 transition-colors duration-200 hover:text-purple-700"},{default:A(()=>[v(c(H),{class:"w-4 h-4 mr-2"}),t[4]||(t[4]=B(" Back to Show Selection "))]),_:1,__:[4]},8,["href"])):g("",!0),y.value==="booking"?(s(),o("button",{key:1,onClick:t[0]||(t[0]=r=>y.value="details"),class:"flex items-center mb-6 text-purple-600 transition-colors duration-200 hover:text-purple-700"},[v(c(H),{class:"w-4 h-4 mr-2"}),t[5]||(t[5]=B(" Back to Show Details "))])):g("",!0),y.value==="details"&&i.value?(s(),o("div",te,[e("div",null,[e("img",{src:f.show.poster_url,class:"w-96 h-96",alt:""},null,8,se),e("div",ae,[e("div",{class:b([i.value.gradient,"h-24 rounded-lg opacity-70"])},null,2),e("div",{class:b([i.value.gradient,"h-24 rounded-lg opacity-50"])},null,2),e("div",{class:b([i.value.gradient,"h-24 rounded-lg opacity-30"])},null,2)])]),e("div",null,[e("div",oe,[e("span",le,l(f.show.category),1)]),e("h1",ie,l(f.show.title),1),e("div",re,[e("div",ne,[(s(),o(P,null,R(5,r=>v(c(Q),{key:r,class:b([r<=i.value.rating?"fill-current":"","w-5 h-5"])},null,8,["class"])),64))]),e("span",de,l(i.value.rating)+"/5 ("+l(i.value.reviews)+" reviews)",1)]),e("p",ue,l(f.show.description),1),e("div",ce,[t[9]||(t[9]=e("h3",{class:"mb-4 text-lg font-semibold"},"Show Details",-1)),e("div",me,[e("div",null,[t[6]||(t[6]=e("div",{class:"text-sm text-gray-500"},"Duration",-1)),e("div",pe,l(S.show.duration)+"min",1)]),t[8]||(t[8]=e("div",null,[e("div",{class:"text-sm text-gray-500"},"Language"),e("div",{class:"font-semibold"},"FRENCH")],-1)),e("div",null,[t[7]||(t[7]=e("div",{class:"text-sm text-gray-500"},"Age Rating",-1)),e("div",ge,l(i.value.ageRating),1)])])]),e("div",ve,[e("div",null,[t[10]||(t[10]=e("div",{class:"text-sm text-gray-500"},"Starting from",-1)),e("div",he," $"+l(i.value.price.toFixed(2)),1)]),e("button",{onClick:t[1]||(t[1]=r=>y.value="booking"),class:"px-8 py-4 text-lg font-semibold text-white transition-all rounded-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700"}," Book Tickets ")])])])):g("",!0),y.value==="booking"&&i.value?(s(),o("div",ye,[t[19]||(t[19]=e("h2",{class:"mb-6 text-2xl font-bold text-center text-gray-800"},"Select Your Tickets",-1)),e("div",fe,[t[13]||(t[13]=e("h3",{class:"mb-4 text-xl font-semibold text-gray-800"},"Available Representations:",-1)),C.value?(s(),o("div",xe,"Loading representations...")):w.value.length===0?(s(),o("div",be," No representations found for this show. ")):(s(),o("ul",ke,[(s(!0),o(P,null,R(w.value,r=>(s(),o("li",{key:r.id,onClick:p=>u.value=r.id,class:b(["p-4 border rounded-lg cursor-pointer transition-all duration-200",u.value===r.id?"border-purple-600 bg-purple-50 shadow-md":"border-gray-200 hover:border-purple-100 hover:shadow-sm"])},[e("div",_e,[e("div",Se,[v(c(K),{class:"w-5 h-5 text-gray-600"}),e("span",Me,l(V(r.date)),1)]),e("div",Ce,[v(c(X),{class:"w-5 h-5 text-gray-600"}),e("span",Pe,l(E(r.date)),1)])]),e("div",Re,[v(c(W),{class:"w-5 h-5"}),e("span",null,l(r.location.address),1)]),e("div",De,[v(c(Y),{class:"w-5 h-5"}),e("div",Te,[t[12]||(t[12]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Price",-1)),j(e("select",{"onUpdate:modelValue":t[2]||(t[2]=p=>_.value=p),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},[t[11]||(t[11]=e("option",{value:""},"Select Show",-1)),(s(!0),o(P,null,R(S.prices,p=>(s(),o("option",{key:p.id,value:p.id},l(p.type)+" "+l(p.price),9,Ae))),128))],512),[[G,_.value]])])])],10,we))),128))]))]),u.value?(s(),o("div",Be,[t[15]||(t[15]=e("h3",{class:"mb-4 text-xl font-semibold text-gray-800"},"Confirm Quantity:",-1)),e("div",je,[t[14]||(t[14]=e("label",{for:"quantity",class:"block text-sm font-medium text-gray-700"},"Quantity:",-1)),j(e("input",{type:"number",id:"quantity","onUpdate:modelValue":t[3]||(t[3]=r=>h.value=r),min:"1",class:"w-24 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 sm:text-sm"},null,512),[[U,h.value,void 0,{number:!0}]])]),e("button",{onClick:N,disabled:m.value||!u.value||h.value<1||!_.value,class:"w-full px-4 py-3 text-lg font-semibold text-white transition-colors duration-200 rounded-md bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed"},[m.value?(s(),o("span",Le,"Booking...")):(s(),o("span",qe,"Confirm Booking"))],8,He)])):g("",!0),d.value?(s(),o("div",Fe,[t[16]||(t[16]=e("p",{class:"font-medium"},"Error:",-1)),e("p",null,l(d.value),1)])):g("",!0),M.value?(s(),o("div",Ne,[t[17]||(t[17]=e("p",{class:"font-medium"},"Booking Confirmed!",-1)),e("p",null,"Your reservation for "+l(h.value)+" ticket(s) has been successfully placed.",1),t[18]||(t[18]=e("p",null,"A confirmation email has been sent to your registered email address.",-1))])):g("",!0)])):g("",!0)])])]),_:1}))}};export{Oe as default};
