import{m as b,z as A,f as x,g as k,o as p,b as e,t as n,a as v,u as w,d as T,i,q as m,y as _,B as q,F as B,s as D,v as j,h as O,c as V,w as P,e as z,n as I,N as h,A as S}from"./app-C-3y-xWQ.js";import{_ as E}from"./AuthLayout-C81i9tPc.js";import{X as F,P as R}from"./x-CK7U48-r.js";import{S as G}from"./search-B5tEGlVK.js";import{S as H}from"./square-pen-YFQlM9HA.js";import{T as Y}from"./trash-2-CTZVH7y0.js";import"./theater-F4K7eIWg.js";import"./ticket-DQe_NsCT.js";import"./Dropdown-D2pMJQv7.js";import"./user-BqKx6FU8.js";const X={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50"},J={class:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] flex flex-col"},K={class:"sticky top-0 z-10 flex items-center justify-between px-6 py-4 bg-white border-b"},Q={class:"text-xl font-bold text-gray-800"},W={class:"flex-1 px-6 py-4 space-y-4 overflow-y-auto"},Z=["value"],ee={class:"inline-flex items-center space-x-2 text-sm font-medium text-gray-700"},te={class:"sticky bottom-0 z-10 flex justify-end px-6 py-4 space-x-4 bg-white border-t"},oe={__name:"ShowModal",props:{isOpen:Boolean,mode:{type:String,default:"add"},initialData:{type:Object,default:()=>({title:"",slug:"",category:"",duration:0,created_in:"",poster_url:"",locality_id:"",bookable:!1,description:""})},localities:Array},emits:["close","save"],setup(c,{emit:g}){const u=g,d=c,o=b({});A(()=>{o.value={...d.initialData}});function f(){u("close")}function y(){u("save",o.value)}return(C,t)=>c.isOpen?(p(),x("div",X,[e("div",J,[e("div",K,[e("h3",Q,n(c.mode==="add"?"Add New Show":"Edit Show"),1),e("button",{onClick:f,class:"text-gray-400 hover:text-gray-600"},[v(w(F),{class:"w-6 h-6"})])]),e("div",W,[e("form",{onSubmit:T(y,["prevent"]),class:"space-y-4"},[e("div",null,[t[9]||(t[9]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Title",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.value.title=l),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},null,512),[[m,o.value.title]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Slug",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.slug=l),type:"text",placeholder:"Optional",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},null,512),[[m,o.value.slug]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Category",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.value.category=l),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},t[11]||(t[11]=[q('<option value="">Select Category</option><option value="Musical">Musical</option><option value="Drama">Drama</option><option value="Comedy">Comedy</option><option value="Ballet">Ballet</option>',5)]),512),[[_,o.value.category]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Duration (minutes)",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.duration=l),type:"number",required:"",min:"1",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},null,512),[[m,o.value.duration,void 0,{number:!0}]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Created Date",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.created_in=l),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},null,512),[[m,o.value.created_in]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Poster URL",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.poster_url=l),type:"url",placeholder:"https://example.com/poster.jpg",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},null,512),[[m,o.value.poster_url]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Locality",-1)),i(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>o.value.locality_id=l),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},[t[16]||(t[16]=e("option",{value:""},"Select Locality",-1)),(p(!0),x(B,null,D(c.localities,l=>(p(),x("option",{key:l.id,value:l.id},n(l.name),9,Z))),128))],512),[[_,o.value.locality_id]])]),e("div",null,[e("label",ee,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=l=>o.value.bookable=l),class:"w-4 h-4 text-purple-600 form-checkbox"},null,512),[[j,o.value.bookable]]),t[18]||(t[18]=e("span",null,"Bookable",-1))])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Description",-1)),i(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=l=>o.value.description=l),rows:"3",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},null,512),[[m,o.value.description]])])],32)]),e("div",te,[e("button",{type:"button",onClick:f,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),e("button",{type:"submit",form:"form",onClick:y,class:"px-6 py-2 text-white rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700"},n(c.mode==="add"?"Add Show":"Save Changes"),1)])])])):k("",!0)}},le={class:"p-6"},se={class:"flex items-center justify-between mb-6"},ae={class:"bg-white border border-gray-100 shadow-sm rounded-xl"},re={class:"p-6 border-b border-gray-200"},ie={class:"flex flex-col gap-4 sm:flex-row"},ne={class:"relative flex-1"},de={class:"overflow-x-auto"},ue={class:"w-full"},pe={class:"px-6 py-4"},ce={class:"flex items-center space-x-3"},me=["src"],ge={class:"font-semibold text-gray-800"},fe={class:"text-sm text-gray-500 lowercase"},ye={class:"px-6 py-4 text-gray-700"},be={class:"px-3 py-1 text-sm font-medium text-purple-800 bg-purple-100 rounded-full"},xe={class:"px-6 py-4 text-gray-600"},ve={class:"px-6 py-4"},we={class:"px-6 py-4 text-gray-600"},he={class:"px-6 py-4 text-gray-500"},Se={class:"px-6 py-4"},ke={class:"flex space-x-2"},_e=["onClick"],Ce=["onClick"],qe={__name:"Shows",props:{shows:Array,venues:Object,localities:Array},setup(c){const g=b("all"),u=b(""),d=b(!1),o=b("add"),f=b({title:"",slug:"",category:"",duration:90,created_in:new Date().toISOString().split("T")[0],poster_url:"",locality_id:"",bookable:!1,description:""}),y=c,C=[{id:1,name:"Royal Opera House",location:"Covent Garden, London",description:"Historic venue with world-class acoustics",capacity:2256,activeShows:8,gradient:"bg-gradient-to-br from-red-600 to-pink-600"},{id:2,name:"Broadway Theater",location:"Times Square, New York",description:"Iconic Broadway venue",capacity:1761,activeShows:6,gradient:"bg-gradient-to-br from-blue-600 to-purple-600"},{id:3,name:"Globe Theatre",location:"Southwark, London",description:"Authentic Shakespearean theatre",capacity:1570,activeShows:4,gradient:"bg-gradient-to-br from-amber-600 to-orange-600"},{id:4,name:"Minskoff Theatre",location:"Times Square, New York",description:"Modern Broadway venue",capacity:1710,activeShows:3,gradient:"bg-gradient-to-br from-green-600 to-teal-600"}];function t(r){const s=y.localities.find(a=>a.id===r);return s?s.name:"Unknown"}const l=O(()=>{let r=y.shows;return g.value!=="all"&&(r=r.filter(s=>s.category.toLowerCase()===g.value)),u.value&&(r=r.filter(s=>s.title.toLowerCase().includes(u.value.toLowerCase())||t(s.locality_id).toLowerCase().includes(u.value.toLowerCase()))),r});function M(){o.value="add",f.value={title:"",slug:"",category:"",duration:90,created_in:new Date().toISOString().split("T")[0],poster_url:"",locality_id:"",bookable:!1,description:""},d.value=!0}function U(r){o.value="edit",f.value={...r},d.value=!0}function L(r){o.value==="add"?h.post(route("admin.shows.store"),r,{preserveScroll:!0,onSuccess:()=>{d.value=!1,S.success("Show created successfully.",{autoClose:3e3,position:"top-right"})}}):h.put(route("admin.shows.update",r.id),r,{preserveScroll:!0,onSuccess:()=>{d.value=!1,S.success("Show Updated successfully.",{autoClose:3e3,position:"top-right"})}})}function N(r){confirm("Are you sure?")&&h.delete(route("admin.shows.destroy",r),{preserveScroll:!0,onSuccess:()=>{S.success("Show deleted successfully.",{autoClose:3e3,position:"top-right"})}})}return(r,s)=>(p(),V(E,null,{default:P(()=>[e("div",le,[e("div",se,[s[4]||(s[4]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Shows Management",-1)),e("button",{onClick:M,class:"px-6 py-3 font-semibold text-white transition-all rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700"},[v(w(R),{class:"inline w-4 h-4 mr-2"}),s[3]||(s[3]=z(" Add New Show "))])]),e("div",ae,[e("div",re,[e("div",ie,[e("div",ne,[v(w(G),{class:"absolute w-4 h-4 text-gray-400 left-3 top-3"}),i(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>u.value=a),type:"text",placeholder:"Search shows...",class:"w-full py-2 pl-10 pr-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[m,u.value]])]),i(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>g.value=a),class:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},s[5]||(s[5]=[e("option",{value:"all"},"All Categories",-1),e("option",{value:"musical"},"Musical",-1),e("option",{value:"drama"},"Drama",-1),e("option",{value:"comedy"},"Comedy",-1),e("option",{value:"ballet"},"Ballet",-1)]),512),[[_,g.value]])])]),e("div",de,[e("table",ue,[s[6]||(s[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Image "),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Show "),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Category "),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Venue "),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Status "),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Price Range "),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Actions ")])],-1)),e("tbody",null,[(p(!0),x(B,null,D(l.value,a=>(p(),x("tr",{key:a.id,class:"border-b border-gray-100 hover:bg-gray-50"},[e("td",pe,[e("div",ce,[a.poster_url?(p(),x("img",{key:0,src:a.poster_url,alt:"Poster",class:"object-cover w-12 h-12 rounded"},null,8,me)):k("",!0),e("div",null,[e("p",ge,n(a.title),1),e("p",fe," /"+n(a.slug),1)])])]),e("td",ye,[e("span",be,n(a.category),1)]),e("td",xe,n(a.locality.name),1),e("td",ve,[e("span",{class:I([a.bookable?"bg-green-100 text-green-800":"bg-gray-200 text-gray-700","px-3 py-1 text-sm font-medium rounded-full"])},n(a.bookable?"Bookable":"Not Bookable"),3)]),e("td",we,n(a.duration)+" mins ",1),e("td",he,n(new Date(a.created_in).toLocaleDateString()),1),e("td",Se,[e("div",ke,[e("button",{onClick:$=>U(a),class:"p-2 text-blue-600 rounded-lg hover:bg-blue-50"},[v(w(H),{class:"w-4 h-4"})],8,_e),e("button",{onClick:$=>N(a.id),class:"p-2 text-red-600 rounded-lg hover:bg-red-50"},[v(w(Y),{class:"w-4 h-4"})],8,Ce)])])]))),128))])])])])]),d.value?(p(),V(oe,{key:0,"is-open":d.value,mode:o.value,"initial-data":f.value,venues:C,localities:y.localities,onClose:s[2]||(s[2]=a=>d.value=!1),onSave:L},null,8,["is-open","mode","initial-data","localities"])):k("",!0)]),_:1}))}};export{qe as default};
