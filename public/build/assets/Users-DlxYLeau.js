import{m as u,C as F,f as w,g as A,o as x,b as e,t as a,a as p,u as m,d as T,i as S,y as D,B as z,h as I,c as k,w as O,q as P,F as q,s as J,n as Q,N as U,A as $}from"./app-BVoR50GL.js";import{_ as X}from"./AuthLayout-WgKQnUfx.js";import{X as G}from"./x-BFwIQ4Zi.js";import{S as H}from"./search-C-iGnU4q.js";import{U as K}from"./user-BH3ja4aR.js";import{E as W}from"./eye-BrbCv9Kb.js";import{S as Y}from"./square-pen-DbXLQ8dG.js";import{c as Z}from"./theater-g4AHLadA.js";import"./ticket-V6BLY61z.js";import"./Dropdown-CYKWVH45.js";/**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=Z("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),te={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50"},se={class:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] flex flex-col"},oe={class:"sticky top-0 z-10 flex items-center justify-between px-6 py-4 bg-white border-b"},ae={class:"text-xl font-bold text-gray-800"},le={class:"flex-1 px-6 py-4 space-y-4 overflow-y-auto"},re={class:"sticky bottom-0 z-10 flex justify-end px-6 py-4 space-x-4 bg-white border-t"},ne={__name:"RoleModal",props:{isOpen:Boolean,mode:{type:String,default:"add"},initialData:{type:Object,default:()=>({role:""})}},emits:["close","save"],setup(c,{emit:f}){const d=f,l=c,r=u({role:""});F(()=>l.isOpen,y=>{y&&(r.value={...l.initialData})});function i(){d("close")}function g(){d("save",r.value)}return(y,n)=>c.isOpen?(x(),w("div",te,[e("div",se,[e("div",oe,[e("h3",ae,a(c.mode==="add"?"Add New User":"Edit User Role"),1),e("button",{onClick:i,class:"text-gray-400 hover:text-gray-600"},[p(m(G),{class:"w-6 h-6"})])]),e("div",le,[e("form",{onSubmit:T(g,["prevent"]),class:"space-y-4"},[e("div",null,[n[2]||(n[2]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"User Role",-1)),S(e("select",{"onUpdate:modelValue":n[0]||(n[0]=_=>r.value.role=_),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},n[1]||(n[1]=[z('<option value="">Select Role</option><option value="admin">Admin</option><option value="user">User</option><option value="affiliate">Affiliate</option><option value="critic">Critic</option><option value="producer">Producer</option>',6)]),512),[[D,r.value.role]])])],32)]),e("div",re,[e("button",{type:"button",onClick:i,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),e("button",{type:"submit",form:"form",onClick:g,class:"px-6 py-2 text-white rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700"},a(c.mode==="add"?"Add Location":"Save Changes"),1)])])])):A("",!0)}},ie={class:"p-6"},ce={class:"flex items-center justify-between mb-6"},de={class:"flex space-x-4"},ue={class:"relative"},pe={class:"bg-white border border-gray-100 shadow-sm rounded-xl"},me={class:"overflow-x-auto"},fe={class:"w-full"},ve={class:"px-6 py-4"},xe={class:"flex items-center space-x-3"},ge={class:"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-r from-purple-600 to-pink-600"},ye={class:"font-semibold text-gray-800"},he={class:"text-sm text-gray-600"},be={class:"px-6 py-4 text-gray-600"},_e={class:"px-6 py-4 text-gray-600"},we={class:"px-6 py-4 text-gray-600"},Se={class:"px-6 py-4 font-semibold text-green-600"},Ce={class:"px-6 py-4"},ke={class:"px-6 py-4"},Ue={class:"flex space-x-2"},$e=["onClick"],Ae=["onClick"],De=["onClick"],ze={__name:"Users",props:{users:{type:Array,required:!0}},setup(c){const f=u(""),d=u("all"),l=u(!1),r=u("add"),i=u({id:null,role:""}),g=c,y=I(()=>{var t,v;const s=(t=d.value)==null?void 0:t.toLowerCase(),o=(v=f.value)==null?void 0:v.toLowerCase();return g.users.filter(b=>{var C;const R=s==="all"||((C=h(b.representation_reservations))==null?void 0:C.toLowerCase())===s,j=!o||[b.name,b.email,b.lastname].filter(Boolean).some(E=>E.toLowerCase().includes(o));return R&&j})}),n=s=>{console.log("View user:",s)},_=s=>{r.value="edit",i.value.id=s.id,i.value.role=s.role,l.value=!0},B=s=>{const t=h(s.representation_reservations)==="Active"?"Inactive":"Active";return s.status=t,t};function L(s){return s.length}const M=s=>{const o=new Date(s);return`${o.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})} ${o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}`},h=s=>s.length>3?"Active":"Inactive";function V(s){let o=0;return s.forEach(t=>{t.price&&t.price.price&&(o+=parseFloat(t.price.price))}),o.toFixed(2)}function N(s){r.value==="add"?U.post(route("admin.users.update"),s,{preserveScroll:!0,onSuccess:()=>{l.value=!1,$.success("Represention created successfully.",{autoClose:3e3,position:"top-right"})}}):U.put(route("admin.users.update",i.value.id),s,{preserveScroll:!0,onSuccess:()=>{l.value=!1,$.success("User Updated successfully.",{autoClose:3e3,position:"top-right"})}})}return(s,o)=>(x(),k(X,null,{default:O(()=>[e("div",ie,[e("div",ce,[o[4]||(o[4]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Users Management",-1)),e("div",de,[e("div",ue,[p(m(H),{class:"absolute w-4 h-4 text-gray-400 left-3 top-3"}),S(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>f.value=t),type:"text",placeholder:"Search users...",class:"py-2 pl-10 pr-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[P,f.value]])]),S(e("select",{"onUpdate:modelValue":o[1]||(o[1]=t=>d.value=t),class:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},o[3]||(o[3]=[e("option",{value:"all"},"All Users",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[D,d.value]])])]),e("div",pe,[e("div",me,[e("table",fe,[o[5]||(o[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"},"User"),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"},"Email"),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"},"Join Date"),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"},"Total Bookings"),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"},"Total Spent"),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"},"Status"),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"},"Actions")])],-1)),e("tbody",null,[(x(!0),w(q,null,J(y.value,t=>(x(),w("tr",{key:t.id,class:"border-b border-gray-100 hover:bg-gray-50"},[e("td",ve,[e("div",xe,[e("div",ge,[p(m(K),{class:"w-5 h-5 text-white"})]),e("div",null,[e("p",ye,a(t.name)+" "+a(t.lastname),1),e("p",he,"ID: U00"+a(t.id),1)])])]),e("td",be,a(t.email),1),e("td",_e,a(M(t.created_at)),1),e("td",we,a(L(t.representation_reservations)),1),e("td",Se,"$"+a(V(t.representation_reservations)),1),e("td",Ce,[e("span",{class:Q([h(t.representation_reservations)==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-3 py-1 text-sm font-medium rounded-full"])},a(h(t.representation_reservations)),3)]),e("td",ke,[e("div",Ue,[e("button",{onClick:v=>n(t),class:"p-2 text-blue-600 rounded-lg hover:bg-blue-50"},[p(m(W),{class:"w-4 h-4"})],8,$e),e("button",{onClick:v=>_(t),class:"p-2 text-green-600 rounded-lg hover:bg-green-50"},[p(m(Y),{class:"w-4 h-4"})],8,Ae),e("button",{onClick:v=>B(t),class:"p-2 text-orange-600 rounded-lg hover:bg-orange-50"},[p(m(ee),{class:"w-4 h-4"})],8,De)])])]))),128))])])])])]),l.value?(x(),k(ne,{key:0,"is-open":l.value,mode:r.value,"initial-data":i.value,onClose:o[2]||(o[2]=t=>l.value=!1),onSave:N},null,8,["is-open","mode","initial-data"])):A("",!0)]),_:1}))}};export{ze as default};
