import{m as y,z as V,f as c,g as _,o as r,b as e,t as p,a as v,u as x,d as U,i as g,y as k,F as S,s as C,q as R,h as j,c as L,w as B,e as F,N as h,A as w}from"./app-C-3y-xWQ.js";import{_ as z}from"./AuthLayout-C81i9tPc.js";import{X as P,P as T}from"./x-CK7U48-r.js";import{S as q}from"./search-B5tEGlVK.js";import{S as E}from"./square-pen-YFQlM9HA.js";import{T as O}from"./trash-2-CTZVH7y0.js";import"./theater-F4K7eIWg.js";import"./ticket-DQe_NsCT.js";import"./Dropdown-D2pMJQv7.js";import"./user-BqKx6FU8.js";const X={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50"},G={class:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] flex flex-col"},H={class:"sticky top-0 z-10 flex items-center justify-between px-6 py-4 bg-white border-b"},I={class:"text-xl font-bold text-gray-800"},J={class:"flex-1 px-6 py-4 space-y-4 overflow-y-auto"},K=["value"],Q=["value"],W={class:"sticky bottom-0 z-10 flex justify-end px-6 py-4 space-x-4 bg-white border-t"},Y={__name:"RepresentationModal",props:{isOpen:Boolean,mode:{type:String,default:"add"},initialData:{type:Object,default:()=>({show_id:"",location_id:"",date:""})},locations:{type:Array,default:()=>[]},shows:{type:Array,default:()=>[]}},emits:["close","save"],setup(i,{emit:b}){const u=b,d=i,n=y({});V(()=>{n.value={...d.initialData}});function f(){u("close")}function m(){u("save",n.value)}return(A,s)=>i.isOpen?(r(),c("div",X,[e("div",G,[e("div",H,[e("h3",I,p(i.mode==="add"?"Add New Location":"Edit Location"),1),e("button",{onClick:f,class:"text-gray-400 hover:text-gray-600"},[v(x(P),{class:"w-6 h-6"})])]),e("div",J,[e("form",{onSubmit:U(m,["prevent"]),class:"space-y-4"},[e("div",null,[s[4]||(s[4]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Show",-1)),g(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>n.value.show_id=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},[s[3]||(s[3]=e("option",{value:""},"Select Show",-1)),(r(!0),c(S,null,C(i.shows,a=>(r(),c("option",{key:a.id,value:a.id},p(a.title),9,K))),128))],512),[[k,n.value.show_id]])]),e("div",null,[s[6]||(s[6]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"location",-1)),g(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>n.value.location_id=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},[s[5]||(s[5]=e("option",{value:""},"Select Location",-1)),(r(!0),c(S,null,C(i.locations,a=>(r(),c("option",{key:a.id,value:a.id},p(a.designation),9,Q))),128))],512),[[k,n.value.location_id]])]),e("div",null,[s[7]||(s[7]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700"},"Date",-1)),g(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>n.value.date=a),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"},null,512),[[R,n.value.date]])])],32)]),e("div",W,[e("button",{type:"button",onClick:f,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),e("button",{type:"submit",form:"form",onClick:m,class:"px-6 py-2 text-white rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700"},p(i.mode==="add"?"Add Location":"Save Changes"),1)])])])):_("",!0)}},Z={class:"p-6"},ee={class:"flex items-center justify-between mb-6"},te={class:"bg-white border border-gray-100 shadow-sm rounded-xl"},oe={class:"p-6 border-b border-gray-200"},se={class:"flex flex-col gap-4 sm:flex-row"},le={class:"relative flex-1"},ae={class:"overflow-x-auto"},ne={class:"w-full"},re={class:"px-6 py-4"},ie={class:"flex items-center space-x-3"},de=["src"],ue={class:"font-semibold text-gray-800"},ce={class:"text-sm text-gray-500 lowercase"},pe={class:"px-6 py-4 text-gray-600"},fe={class:"px-6 py-4 text-gray-500"},me={class:"px-6 py-4"},ye={class:"flex space-x-2"},ve=["onClick"],xe=["onClick"],Re={__name:"Representations",props:{shows:Array,representations:Array,locations:Array},setup(i){const b=y("all"),u=y(""),d=y(!1),n=y("add"),f=y({show_id:"",location_id:"",date:""}),m=i;function A(o){const t=m.localities.find(l=>l.id===o);return t?t.name:"Unknown"}const s=j(()=>{let o=m.representations;return b.value!=="all"&&(o=o.filter(t=>t.category.toLowerCase()===b.value)),u.value&&(o=o.filter(t=>t.title.toLowerCase().includes(u.value.toLowerCase())||A(t.location_id).toLowerCase().includes(u.value.toLowerCase()))),o});function a(){n.value="add",f.value={show_id:"",location_id:"",date:""},d.value=!0}function $(o){n.value="edit",f.value={...o},d.value=!0}function D(o){console.log(o),n.value==="add"?h.post(route("admin.representations.store"),o,{preserveScroll:!0,onSuccess:()=>{d.value=!1,w.success("Represention created successfully.",{autoClose:3e3,position:"top-right"})}}):h.put(route("admin.representations.update",o.id),o,{preserveScroll:!0,onSuccess:()=>{d.value=!1,w.success("Represention Updated successfully.",{autoClose:3e3,position:"top-right"})}})}function M(o){confirm("Are you sure?")&&h.delete(route("admin.representations.destroy",o),{preserveScroll:!0,onSuccess:()=>{w.success("Represention deleted successfully.",{autoClose:3e3,position:"top-right"})}})}return(o,t)=>(r(),L(z,null,{default:B(()=>[e("div",Z,[e("div",ee,[t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Representations Management",-1)),e("button",{onClick:a,class:"px-6 py-3 font-semibold text-white transition-all rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700"},[v(x(T),{class:"inline w-4 h-4 mr-2"}),t[3]||(t[3]=F(" Add New Representation "))])]),e("div",te,[e("div",oe,[e("div",se,[e("div",le,[v(x(q),{class:"absolute w-4 h-4 text-gray-400 left-3 top-3"}),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l),type:"text",placeholder:"Search shows...",class:"w-full py-2 pl-10 pr-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},null,512),[[R,u.value]])]),g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.showsFilter=l),class:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"},t[5]||(t[5]=[e("option",{value:"all"},"All Categories",-1),e("option",{value:"musical"},"Musical",-1),e("option",{value:"drama"},"Drama",-1),e("option",{value:"comedy"},"Comedy",-1),e("option",{value:"ballet"},"Ballet",-1)]),512),[[k,o.showsFilter]])])]),e("div",ae,[e("table",ne,[t[6]||(t[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Show "),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Location "),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Date "),e("th",{class:"px-6 py-4 font-medium text-left text-gray-600"}," Actions ")])],-1)),e("tbody",null,[(r(!0),c(S,null,C(s.value,l=>(r(),c("tr",{key:l.id,class:"border-b border-gray-100 hover:bg-gray-50"},[e("td",re,[e("div",ie,[l.show.poster_url?(r(),c("img",{key:0,src:l.show.poster_url,alt:"Poster",class:"object-cover w-12 h-12 rounded"},null,8,de)):_("",!0),e("div",null,[e("p",ue,p(l.show.title),1),e("p",ce," /"+p(l.location.address),1)])])]),e("td",pe,p(l.location.designation),1),e("td",fe,p(new Date(l.date).toLocaleDateString()),1),e("td",me,[e("div",ye,[e("button",{onClick:N=>$(l),class:"p-2 text-blue-600 rounded-lg hover:bg-blue-50"},[v(x(E),{class:"w-4 h-4"})],8,ve),e("button",{onClick:N=>M(l.id),class:"p-2 text-red-600 rounded-lg hover:bg-red-50"},[v(x(O),{class:"w-4 h-4"})],8,xe)])])]))),128))])])])])]),d.value?(r(),L(Y,{key:0,"is-open":d.value,mode:n.value,"initial-data":f.value,shows:i.shows,locations:m.locations,onClose:t[2]||(t[2]=l=>d.value=!1),onSave:D},null,8,["is-open","mode","initial-data","shows","locations"])):_("",!0)]),_:1}))}};export{Re as default};
